window.addEventListener("DOMContentLoaded",(async()=>{try{document.querySelectorAll(".closeWindow").forEach((e=>{e&&e.addEventListener("click",(async()=>{try{await window.electronAPI.closeMenu("settings")}catch(e){console.error("Menu kapatılırken hata oluştu:",e)}}))}));const e=document.getElementById("checkAdressOnStartupSwitch"),t=document.getElementById("adBlockerSwitch");let a=await window.electronAPI.getDizipal();e.checked=a.checkAdressOnStartup,t.checked=a.adBlocker;let n=document.getElementById("currentSiteURL");n.value=a.currentSiteURL;const c=document.getElementById("syncURL");c.addEventListener("click",(async()=>{c.classList.add("loading");const e=await window.electronAPI.getApiURL();a.currentSiteURL=e,await window.electronAPI.setDizipal(a),n.value=e,c.classList.remove("loading"),await window.electronAPI.notification({body:`Güncel adres ${n.value} ile başarıyla eşleşildi!`})}));document.getElementById("saveChanges").addEventListener("click",(async()=>{let c=!1;const i=await window.electronAPI.getLoadedURL();n.value!==i&&(a.currentSiteURL=n.value,c=!0),a.checkAdressOnStartup=!!e.checked,a.adBlocker=!!t.checked,await window.electronAPI.setDizipal(a),await window.electronAPI.notification({body:"Değişiklikler Başarıyla Kaydedildi!"}),c&&await window.electronAPI.reloadURL(a.currentSiteURL,a.adBlocker)}))}catch(e){console.error("Veri alma hatası:",e)}}));